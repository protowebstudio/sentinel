---
import RiskBadge from './RiskBadge.astro';
import StatusDot from '../shared/StatusDot.astro';

interface Props {
  riskScore: number;
  riskLevel: "low" | "medium" | "high" | "critical";
  windowSize: number;
  lastEventAt: string | null; // In Sentinel: this is the last health-check timestamp (UTC)
  status: "active" | "inactive"; // In Sentinel: execution-core health status
}

const {
  riskScore,
  riskLevel,
  windowSize,
  lastEventAt,
  status,
} = Astro.props;

const statusLabel = status === "active" ? "Execution Core Online" : "Execution Core Offline";
const timestampLabel = lastEventAt ? lastEventAt : "No probe recorded";
---
<section class="py-20 border-t border-b border-outline bg-surface">
  <div class="container mx-auto px-4 max-w-5xl">

    <div class="mb-10">
      <h2 class="text-sm font-semibold tracking-widest uppercase text-content-light">
        Monitoring Status
      </h2>
    </div>

    <div class="grid md:grid-cols-2 gap-12 items-start">

      <!-- Left: System State (read-only probe) -->
      <div class="space-y-6">
        <div class="flex items-center gap-3">
          <StatusDot status={status} />
          <span class="text-base font-medium text-content">
            {statusLabel}
          </span>
        </div>

        <div class="text-sm text-content-light space-y-2">
          <div>
            <span class="text-content">Last Check (UTC):</span>{" "}
            {timestampLabel}
          </div>
          <div>
            <span class="text-content">Risk Signal:</span>{" "}
            {windowSize === 0 ? "Not wired (read-only demo)" : `${windowSize}s window`}
          </div>
        </div>
      </div>

      <!-- Right: Risk Signal (may be placeholder until Phase 3.2 wiring) -->
      <div class="flex items-start md:justify-end">
        <RiskBadge level={riskLevel} score={riskScore} />
      </div>

    </div>

  </div>
</section>
